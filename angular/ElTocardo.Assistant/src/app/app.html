<div class="container">
  <header>
    <h1>{{ title() }}</h1>
    <div class="auth-controls">
      @if (isAuthenticated) {
        <button class="btn btn-secondary" (click)="logout()">Logout</button>
      } @else {
        <button class="btn btn-primary" (click)="login()">Login with OIDC</button>
      }
    </div>
  </header>

  <main>
    @if (!isAuthenticated) {
      <div class="message info">
        <p>Please login to view AI Providers</p>
      </div>
    } @else {
      <div class="ai-providers-section">
        <div class="section-header">
          <h2>AI Providers</h2>
          <button class="btn btn-primary" (click)="loadAiProviders()" [disabled]="loading()">
            {{ loading() ? 'Loading...' : 'Refresh' }}
          </button>
        </div>

        @if (error()) {
          <div class="message error">
            <p>{{ error() }}</p>
          </div>
        }

        @if (loading()) {
          <div class="loading">Loading AI Providers...</div>
        } @else if (aiProviders().length > 0) {
          <div class="providers-grid">
            @for (provider of aiProviders(); track provider.name) {
              <div class="provider-card">
                <h3>{{ provider.name }}</h3>
                <div class="provider-details">
                  @if (provider.models && provider.models.length > 0) {
                    <div class="models">
                      <strong>Models:</strong>
                      <ul>
                        @for (model of provider.models; track model.id) {
                          <li>{{ model.name || model.id }}</li>
                        }
                      </ul>
                    </div>
                  }
                </div>
              </div>
            }
          </div>
        } @else {
          <div class="message">
            <p>No AI providers found</p>
          </div>
        }
      </div>
    }
  </main>
</div>

<router-outlet />
