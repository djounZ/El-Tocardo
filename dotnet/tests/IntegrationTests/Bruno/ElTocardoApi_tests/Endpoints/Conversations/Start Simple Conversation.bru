meta {
  name: Start Simple Conversation
  type: http
  seq: 1
}

post {
  url: {{api_backend}}/v1/conversation/start
  body: json
  auth: inherit
}

body:json {
  {
    "title": "Simple Conversation Test",
    "description": "This a demo conversation",
    "provider": "github_copilot",
    "options": {
      "max_output_tokens": 8000
    },
    "input_message": {
      "role": "user",
      "contents": [
        {
          "$type": "text",
          "text": "Hello"
        }
      ]
    }
  }
}

script:post-response {
  let conversation_id = res.body.conversation_id;
  
  bru.setVar("simple_conversation_id",conversation_id)
  
}

settings {
  encodeUrl: true
}
